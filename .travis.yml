language: python
python: 
  - "2.6"
  - "2.7"
  - "2.7_with_system_site_packages"
  - "3.3"
  - "pypy"
services:
  - mongodb
before_install:
  - export PATH=/opt/python/2.7.6/bin:/opt/python/2.6.9/bin:/opt/python/3.4.0/bin:/opt/python/3.3.5/bin:/opt/python/3.2.5/bin:/opt/python/pypy-2.2.1/bin:$PATH
  - sleep 5
  - mongo localhost:27017/olympus createMongoDatabase.js
install: "pip install --use-mirrors -r requirements.txt"
script:
  - sudo python setup.py install --force
  - sleep 5
  - gearmand -d
  - cd Olympus
  - nosetests -v --nocapture webapp/start.py lib/*.py lib/*/*.py modules/*/*.py core/*.py core/*/*.py
  - ls -al
  - sphinx-apidoc -f -o docs/ . ; cd docs/ ; make html ; cd ..
matrix:
  allow_failures:
    - python: "3.3"